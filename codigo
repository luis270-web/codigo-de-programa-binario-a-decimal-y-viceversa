// Importo JOptionPane y otros para poder armar mis propias ventanitas con validación
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

public class Convertidor {

    public static void main(String[] args) {

        // 1. Texto del menú principal del programa
        //Armamos el texto del menú que se va a mostrar en la ventanita
        String textoMenu = "--- CONVERSOR DE NÚMEROS ---\n"
                + "1. Convertir Decimal a Binario\n"
                + "2. Convertir Binario a Decimal\n"
                + "Elige una opción (1 o 2):";

        // Variable donde voy a guardar la opción ya como número
        int opcionMenu = -1;

        // Este ciclo se repite mientras NO elija 1 ni 2
        while (opcionMenu != 1 && opcionMenu != 2) {

            // Ventanita con JTextField que solo acepta números
            String opcionEscrita = pedirSoloNumeros(
                    "Menú principal",   // Título de la ventana
                    textoMenu           // Mensaje que quiero mostrar
            );

            // Si el usuario cancela, termino el programa
            if (opcionEscrita == null) {
                return;
            }

            // Si dio OK pero no escribió nada, muestro mensaje y repito el menú
            if (opcionEscrita.isEmpty()) {
                JOptionPane.showMessageDialog(
                        null,
                        "Elige entre la opción 1 y 2.",
                        "Opción incorrecta",
                        JOptionPane.WARNING_MESSAGE
                );
                continue;   // Vuelve al inicio del while
            }

            // Convierto lo que escribió a número entero (solo trae dígitos)
            opcionMenu = Integer.parseInt(opcionEscrita);

            // Si la opción no es 1 ni 2, le aviso y se repite el ciclo
            if (opcionMenu != 1 && opcionMenu != 2) {
                JOptionPane.showMessageDialog(
                        null,
                        "Elige entre la opción 1 y 2.",
                        "Opción incorrecta",
                        JOptionPane.WARNING_MESSAGE
                );
            }
        }

        // 2. Switch para decidir qué conversión hacer
        switch (opcionMenu) {

            // CASO 1: DECIMAL A BINARIO
            case 1: {

                // Pedir DECIMAL obligatoriamente
                String textoDecimal = "";
                while (textoDecimal.isEmpty()) {

                    textoDecimal = pedirSoloNumeros(
                            "Decimal a Binario",
                            "Ingresa un número decimal (ej. 10):"
                    );

                    // Si cancela, salgo del programa
                    if (textoDecimal == null) {
                        return;
                    }

                    // Si viene vacío, aviso y repito el while
                    if (textoDecimal.isEmpty()) {
                        JOptionPane.showMessageDialog(
                                null,
                                "No puedes dejar vacío, ingresa un número decimal.",
                                "Dato faltante",
                                JOptionPane.WARNING_MESSAGE
                        );
                    }
                }

                // Convierto el texto a número entero 
                int numeroDecimalUsuario = Integer.parseInt(textoDecimal);

                // Validación extra por si quiero evitar negativos
                if (numeroDecimalUsuario < 0) {
                    JOptionPane.showMessageDialog(
                            null,
                            "Por favor ingresa solo números positivos.",
                            "Número no válido",
                            JOptionPane.WARNING_MESSAGE
                    );
                    return;
                }

                // String donde voy a ir armando el binario final
                String binarioFinal = "";

                // Variable temporal para ir dividiendo sin perder el original
                int numeroTemporal = numeroDecimalUsuario;

                // Caso especial: si el número es 0, el binario es "0"
                if (numeroTemporal == 0) {
                    binarioFinal = "0";
                } else {
                    // Ciclo: mientras el número sea mayor que 0 lo voy dividiendo entre 2
                    while (numeroTemporal > 0) {

                        // Saco el residuo de dividir entre 2 (me da 0 o 1)
                        int residuoDivision = numeroTemporal % 2;

                        // Voy agregando el residuo al INICIO del String
                        binarioFinal = residuoDivision + binarioFinal;

                        // Divido el número entre 2 para la siguiente vuelta del ciclo
                        numeroTemporal = numeroTemporal / 2;
                    }
                }

                // Muestro el resultado en una ventanita
                JOptionPane.showMessageDialog(
                        null,
                        "El número " + numeroDecimalUsuario + " en binario es: " + binarioFinal,
                        "Resultado Decimal a Binario",
                        JOptionPane.INFORMATION_MESSAGE
                );

                break;
            }